name: "CodeQL"

on:
  push:
    branches: [ main ]
  pull_request:
    # The branches below must be a subset of the branches above
    branches: [ main ]
  schedule:
    - cron: '32 8 * * 0'
    
jobs: 
 welcome:
  runs-on: ubuntu-latest
  steps:
      - uses: actions/github-script@v5
        with:
          Id: array
          script: |
              matrix: ['new1','new2','new3']
              for i in "${{matrix}}"
              do 
                - name: $i
                  runs-on: ubuntu-latest
                  permissions:
                    actions: read
                    contents: read
                    security-events: write

                  strategy:
                    fail-fast: false
                    matrix:
                      language: [ 'javascript' ]

                  steps:
                  - name: Checkout repository
                    uses: actions/checkout@v2
                    with:
                      repository: dtest4554/$i

                  - name: Initialize CodeQL
                    uses: github/codeql-action/init@v1

                    with:
                      languages: ${{ matrix.language }}
                      disable-default-queries: true
                      queries: dtest4554/CodeQL_repo/.github/workflows/codeql/custom-queries/javascript/codeInAttribute.ql@main, dtest4554/CodeQL_repo/.github/workflows/codeql/custom-queries/javascript/custom.ql@main, dtest4554/CodeQL_repo/.github/workflows/codeql/custom-queries/javascript/findingunsafeeval.ql@main 

                  - name: Autobuild
                    uses: github/codeql-action/autobuild@v1

                  - name: Perform CodeQL Analysis
                    uses: github/codeql-action/analyze@v1
                 done
